<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Magic 8 Ball â€” Polished</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap');

  :root {
    --bg: #121212;
    --ball-dark: #232323;
    --ball-light: #3a3a3a;
    --blue-glow: #2ca8ff;
    --text-main: #eee;
    --text-muted: #777;
    --line: #555;
  }

  *, *::before, *::after {
    box-sizing: border-box;
  }

  body, html {
    margin: 0; padding: 0;
    height: 100vh;
    background: var(--bg);
    font-family: 'Montserrat', sans-serif;
    color: var(--text-main);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  #eightBall {
    position: relative;
    width: 200px;
    height: 200px;
    background: radial-gradient(circle at 30% 30%, var(--ball-light), var(--ball-dark));
    border-radius: 50%;
    box-shadow:
      inset 0 6px 20px rgba(255 255 255 / 0.12),
      0 0 40px var(--blue-glow);
    filter: drop-shadow(0 4px 15px rgba(0,0,0,0.7));
    user-select: none;
  }

  #shine {
    position: absolute;
    top: 30px; left: 50px;
    width: 70px; height: 70px;
    background: radial-gradient(circle at 25% 25%, #fff3, transparent 85%);
    border-radius: 50%;
    filter: blur(6px);
    pointer-events: none;
    transform: rotate(-20deg);
    z-index: 10;
  }

  #triangleContainer {
    position: absolute;
    top: 50%; left: 50%;
    width: 140px; height: 120px;
    transform-style: preserve-3d;
    transform-origin: center center;
    transform: translate(-50%, -55%);
    pointer-events: none;
    filter: drop-shadow(0 0 10px var(--blue-glow));
  }

  #triangle {
    width: 0; height: 0;
    border-left: 70px solid transparent;
    border-right: 70px solid transparent;
    border-bottom: 120px solid var(--blue-glow);
    border-radius: 12px;
    box-shadow:
      0 0 30px var(--blue-glow),
      inset 0 0 45px var(--blue-glow);
    backface-visibility: hidden;
  }

  #answerText {
    position: absolute;
    top: 42px; left: 50%;
    width: 110px;
    transform: translateX(-50%);
    color: #def1ff;
    font-weight: 600;
    font-size: 16px;
    line-height: 1.2;
    text-align: center;
    letter-spacing: 0.03em;
    user-select: none;
    filter:
      drop-shadow(0 0 8px #8fcfff);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }

  #questionBox {
    position: fixed;
    bottom: 70px;
    left: 50%;
    transform: translateX(-50%);
    max-width: 600px;
    width: 90vw;
    text-align: center;
    user-select: text;
    z-index: 50;
  }

  #questionText {
    font-size: 28px;
    font-weight: 600;
    color: var(--text-main);
    margin-bottom: 6px;
    min-height: 38px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  #underline {
    width: 100%;
    height: 2px;
    background: var(--line);
    margin-bottom: 10px;
    user-select: none;
  }

  #helperText {
    font-size: 14px;
    font-style: italic;
    font-weight: 400;
    color: var(--text-muted);
  }

  #questionInput {
    position: fixed;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    width: 90vw;
    max-width: 600px;
    font-size: 22px;
    font-weight: 500;
    padding: 14px 18px;
    border: none;
    border-radius: 12px;
    background: var(--ball-dark);
    color: var(--text-main);
    text-align: center;
    font-family: 'Montserrat', sans-serif;
    outline: none;
    caret-color: var(--blue-glow);
    box-shadow: 0 0 8px #0008;
    transition: box-shadow 0.3s ease, background 0.3s ease;
    user-select: text;
  }

  #questionInput::placeholder {
    color: var(--text-muted);
    opacity: 0.6;
    font-style: italic;
  }

  #questionInput:focus {
    box-shadow: 0 0 18px var(--blue-glow);
    background: #1f1f1f;
  }
</style>
</head>
<body>

  <div id="eightBall" aria-label="Magic 8 Ball" role="img">
    <div id="shine"></div>
    <div id="triangleContainer" aria-live="polite" aria-atomic="true">
      <div id="triangle"></div>
      <div id="answerText"></div>
    </div>
  </div>

  <div id="questionBox" aria-live="polite" aria-atomic="true">
    <div id="questionText" aria-label="User question"></div>
    <div id="underline"></div>
    <div id="helperText">*press enter to ask*</div>
  </div>

  <input
    id="questionInput"
    type="text"
    placeholder="Type your question here..."
    autocomplete="off"
    spellcheck="false"
    aria-label="Question input"
  />

  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
  <script>
    const answers = [
      "It is certain",
      "It is decidedly so",
      "Without a doubt",
      "Yes, definitely",
      "You may rely on it",
      "As I see it, yes",
      "Most likely",
      "Outlook good",
      "Yes",
      "Signs point to yes",
      "Reply hazy",
      "Ask again later",
      "Better not tell you",
      "Cannot predict now",
      "Concentrate again",
      "Don't count on it",
      "My reply is no",
      "My sources say no",
      "Outlook not so good",
      "Very doubtful"
    ];

    const input = document.getElementById('questionInput');
    const questionText = document.getElementById('questionText');
    const answerText = document.getElementById('answerText');
    const triangleContainer = document.getElementById('triangleContainer');
    const eightBall = document.getElementById('eightBall');

    // Idle float for ball and subtle slow rotation for triangle container
    gsap.to(eightBall, {
      y: -6,
      repeat: -1,
      yoyo: true,
      ease: "power1.inOut",
      duration: 3
    });

    gsap.to(triangleContainer, {
      rotationY: 15,
      repeat: -1,
      yoyo: true,
      ease: "power1.inOut",
      duration: 5,
      transformOrigin: "50% 50%"
    });

    function showAnswer(question, answer) {
      questionText.textContent = question;
      answerText.textContent = answer;

      gsap.fromTo(questionText,
        { y: 0, opacity: 0 },
        { y: -50, opacity: 1, duration: 1, ease: "power3.out" });

      gsap.fromTo(answerText,
        { scale: 0.8, opacity: 0 },
        { scale: 1, opacity: 1, duration: 1.2, ease: "elastic.out(1, 0.5)" });

      gsap.fromTo('#underline',
        { boxShadow: "0 0 0px transparent" },
        { boxShadow: "0 0 8px var(--blue-glow)", duration: 1, yoyo: true, repeat: 1 });
    }

    input.addEventListener('keydown', e => {
      if (e.key === 'Enter') {
        const question = input.value.trim();
        if (!question) return;

        const answer = answers[Math.floor(Math.random() * answers.length)];
        showAnswer(question, answer);

        input.value = "";

        gsap.fromTo('#questionBox',
          { y: 60, opacity: 0 },
          { y: -130, opacity: 1, duration: 1.5, ease: "power3.out" });
      }
    });
  </script>

</body>
</html>
